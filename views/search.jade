extends layout

block content

	.ui.grid

		.ui.sixteen.wide.column
			.ui.segment
				h1.ui.header Searching for: #{search}

		.ui.sixteen.wide.column
			.ui.segment
				h2.ui.teal.header
					.content Controversy over time
				iframe(style="border:0px;" src="#{iframe}" height="200" width="100%")

		.ui.eight.wide.column
			.ui.segment
				h2.ui.teal.header
					.content Most Controversial Issues on "#{search}"
				- each article,i in top
					div(style='display:block;')
						- var rounded = Math.round(article._source.features.controversy.value * 100)
						- var red = Math.round(rounded * 2.2)
						- var green = 220 - red
						div(style='float:right; margin-left:20px;')
							div(class="ui active progress" style="width:100px")
								div(class="bar" style="width:#{rounded}px; background-color: rgb(#{red},#{green},0)")
									div(class="progress") #{rounded}%
						a(href='/browse/article/'+article._id, style="") #{article._source.document.title}
					hr(style="clear:both")

		.ui.eight.wide.column
			.ui.segment
				h2.ui.teal.header
					.content Least Controversial Issues on "#{search}"
				- each article,i in bottom
					div(style='display:block;')
						- var rounded = Math.round(article._source.features.controversy.value * 100)
						- var red = Math.round(rounded * 2.2)
						- var green = 220 - red
						div(style='float:right; margin-left:20px;')
							div(class="ui active progress" style="width:100px")
								div(class="bar" style="width:#{rounded}px; background-color: rgb(#{red},#{green},0)")
									div(class="progress") #{rounded}%
						a(href='/browse/article/'+article._id, style="") #{article._source.document.title}
					hr(style="clear:both")

		if bottom[0]
			.ui.sixteen.wide.column.right.aligned
				a.ui.right.labeled.icon.primary.button(href='/browse/article/'+bottom[0]._id)
					i.right.arrow.icon
					| Please help us by annotating an article
